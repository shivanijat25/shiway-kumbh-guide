<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Traffic Alerts – Shiway</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="index.html">
            <img src="assets/logo.png" alt="Shiway Logo" height="40" class="me-2" />
            <span class="fw-bold">SHIWAY</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html"><i class="fas fa-home me-1"></i>Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="shahi-snan.html"><i class="fas fa-calendar-alt me-1"></i>Shahi Snan</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="map.html"><i class="fas fa-map me-1"></i>Map</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="traffic.html"><i class="fas fa-traffic-light me-1"></i>Traffic</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="emergency.html"><i class="fas fa-phone-alt me-1"></i>Emergency</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Page Hero -->
<div class="page-hero">
    <div class="container">
        <img src="assets/logo.png" alt="Shiway Logo" />
        <h1><i class="fas fa-traffic-light me-3"></i>Traffic Alerts</h1>
        <p>Real-time traffic updates and route recommendations</p>

        <!-- Traffic Summary -->
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="stat-card glass-effect text-center p-3 rounded">
                    <div class="stat-number text-white">2</div>
                    <div class="stat-label text-white-50">High Traffic Areas</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card glass-effect text-center p-3 rounded">
                    <div class="stat-number text-white">2</div>
                    <div class="stat-label text-white-50">Clear Routes</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card glass-effect text-center p-3 rounded">
                    <div class="stat-number text-white">1</div>
                    <div class="stat-label text-white-50">Road Work</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Content -->
<div class="container mt-5 mb-5">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h2 class="text-gradient mb-2">Live Traffic Updates</h2>
                    <p class="text-muted">Stay informed about current road conditions</p>
                </div>
                <div>
                    <button class="btn btn-primary-gradient" onclick="refreshTrafficData()">
                        <i class="fas fa-sync-alt me-2"></i>Refresh
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Traffic Filter Controls -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title mb-3">
                        <i class="fas fa-filter me-2"></i>Filter Traffic Alerts
                    </h5>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="trafficFilter" id="allTraffic" value="all" checked>
                        <label class="btn btn-outline-primary" for="allTraffic">
                            <i class="fas fa-globe me-1"></i>All Alerts
                        </label>

                        <input type="radio" class="btn-check" name="trafficFilter" id="highTraffic" value="high">
                        <label class="btn btn-outline-danger" for="highTraffic">
                            <i class="fas fa-exclamation-triangle me-1"></i>High Traffic
                        </label>

                        <input type="radio" class="btn-check" name="trafficFilter" id="moderateTraffic" value="moderate">
                        <label class="btn btn-outline-warning" for="moderateTraffic">
                            <i class="fas fa-exclamation-circle me-1"></i>Moderate
                        </label>

                        <input type="radio" class="btn-check" name="trafficFilter" id="clearTraffic" value="clear">
                        <label class="btn btn-outline-success" for="clearTraffic">
                            <i class="fas fa-check-circle me-1"></i>Clear Routes
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Traffic Alerts List -->
    <div class="row">
        <div class="col-12">
            <ul class="list-group" id="trafficContainer">
                <li class="list-group-item d-flex justify-content-center align-items-center" style="min-height: 200px;">
                    <div class="text-center">
                        <div class="loading-spinner mb-3"></div>
                        <p class="text-muted">Loading traffic alerts...</p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body text-center">
                    <h5 class="card-title mb-3">
                        <i class="fas fa-route me-2 text-primary"></i>Navigation Tools
                    </h5>
                    <div class="row g-3">
                        <div class="col-md-3">
                            <a href="map.html" class="btn btn-outline-primary w-100">
                                <i class="fas fa-map-marked-alt me-2"></i>View Traffic Map
                            </a>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-success w-100" onclick="findBestRoute()">
                                <i class="fas fa-route me-2"></i>Best Route
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-warning w-100" onclick="reportTraffic()">
                                <i class="fas fa-exclamation-triangle me-2"></i>Report Issue
                            </button>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-info w-100" onclick="shareTrafficInfo()">
                                <i class="fas fa-share me-2"></i>Share Updates
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Traffic Tips -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="alert alert-info border-0 shadow-sm">
                <h6 class="alert-heading">
                    <i class="fas fa-lightbulb me-2"></i>Traffic Tips
                </h6>
                <ul class="mb-0">
                    <li>Plan your journey during off-peak hours (early morning or late evening)</li>
                    <li>Use alternate routes when main roads are congested</li>
                    <li>Allow extra time for travel during peak festival days</li>
                    <li>Consider walking for short distances within the mela grounds</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <div class="footer-brand">
                    <img src="assets/logo.png" alt="Shiway Logo" height="40" />
                    <h5>SHIWAY</h5>
                    <p>Your trusted companion for Simhastha Kumbh Mela</p>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="footer-links">
                    <h6>Quick Links</h6>
                    <ul>
                        <li><a href="shahi-snan.html">Shahi Snan</a></li>
                        <li><a href="food-stations.html">Food Facilities</a></li>
                        <li><a href="map.html">Interactive Map</a></li>
                        <li><a href="emergency.html">Emergency Help</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="footer-contact">
                    <h6>Emergency Contact</h6>
                    <p><i class="fas fa-phone"></i> +91-9999999999</p>
                    <p><i class="fas fa-envelope"></i> help@shiway.com</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2028 Shiway Project – Smart Simhastha Guide. Made with ❤️ for pilgrims.</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="data.js"></script>
<script src="script.js"></script>

<script>
// Enhanced traffic functionality
function refreshTrafficData() {
    showNotification('Refreshing traffic data...', 'info');

    // Simulate data refresh
    setTimeout(() => {
        populateTrafficAlerts();
        showNotification('Traffic data updated successfully!', 'success');
    }, 1000);
}

function findBestRoute() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
            const userLat = position.coords.latitude;
            const userLng = position.coords.longitude;

            // Find clear routes
            const clearRoutes = data.traffic.filter(alert =>
                alert.info.includes('Clear') || alert.info.includes('Free')
            );

            if (clearRoutes.length > 0) {
                const nearest = clearRoutes[0];
                const url = `https://www.google.com/maps/dir/${userLat},${userLng}/${nearest.lat},${nearest.lng}`;
                window.open(url, '_blank');
                showNotification('Opening best route in Google Maps', 'success');
            } else {
                showNotification('No clear routes available at the moment', 'warning');
            }
        });
    } else {
        showNotification('Please enable location access for route planning', 'warning');
    }
}

function reportTraffic() {
    const reportModal = `
        <div class="modal fade" id="reportModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Report Traffic Issue</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="mb-3">
                                <label class="form-label">Issue Type</label>
                                <select class="form-select">
                                    <option>Heavy Traffic</option>
                                    <option>Road Block</option>
                                    <option>Accident</option>
                                    <option>Construction</option>
                                    <option>Other</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Location</label>
                                <input type="text" class="form-control" placeholder="Enter location">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Description</label>
                                <textarea class="form-control" rows="3" placeholder="Describe the issue"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="submitReport()">Submit Report</button>
                    </div>
                </div>
            </div>
        </div>
    `;

    document.body.insertAdjacentHTML('beforeend', reportModal);
    const modal = new bootstrap.Modal(document.getElementById('reportModal'));
    modal.show();
}

function submitReport() {
    showNotification('Thank you for your report! It will help other pilgrims.', 'success');
    bootstrap.Modal.getInstance(document.getElementById('reportModal')).hide();
    document.getElementById('reportModal').remove();
}

function shareTrafficInfo() {
    const trafficSummary = data.traffic.map(alert => alert.info).join('\n');

    if (navigator.share) {
        navigator.share({
            title: 'Traffic Updates - Shiway',
            text: 'Current traffic conditions:\n\n' + trafficSummary
        });
    } else {
        navigator.clipboard.writeText(trafficSummary).then(() => {
            showNotification('Traffic updates copied to clipboard!');
        });
    }
}

// Auto-refresh traffic data every 5 minutes
setInterval(() => {
    populateTrafficAlerts();
}, 300000);
</script>
</body>
</html>
